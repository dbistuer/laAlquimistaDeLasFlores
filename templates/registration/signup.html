{% extends "home.html" %}
{% load i18n static %}
{% block title %}{% trans "Sign in" %}{% endblock %}
{% block javascript %}
<script src="{% static 'js/radioButtonDjangoHelper.js' %}"></script>
<script src="{% static 'js/progressbar.js' %}"></script>
<script src="{% static 'js/password.js' %}"></script>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card mt-5">
                    <div class="card-header text-center">
                        <h4>{% trans "User Registration" %}</h4>
                    </div>
                    <div class="card-body">
                        <form id="registrationForm" method="post">
                            {% csrf_token %}
                            <div class="form-floating">
                                <input type="text" class="form-control" id="username" name="username" placeholder="{% trans "Enter username" %}" required>
                                <label for="username">{% trans "Username" %}</label>
                            </div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="first_name" name="first_name" placeholder="{% trans "Enter first name" %}" required>
                                <label for="first_name">{% trans "First name" %}</label>
                            </div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="last_name" name="last_name" placeholder="{% trans "Enter last name" %}" required>
                                <label for="last_name">{% trans "Last name" %}</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="NIF" id="NIF" checked>
                                <label class="form-check-label" for="NIF">
                                    NIF
                                </label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="NIE" id="NIE">
                                <label class="form-check-label" for="NIE">
                                    NIE
                                </label>
                            </div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="identification" name="identification" placeholder="{% trans "Enter identification" %}" required>
                                <label for="identification">{% trans "Identification" %}</label>
                            </div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="phone" name="phone" placeholder="{% trans "Enter phone number" %}">
                                <label for="phone">{% trans "Phone" %}</label>
                            </div>
                            <div class="form-floating">
                                <input type="email" class="form-control" id="email" name="email" placeholder="{% trans "Enter email" %}" required>
                                <label for="email">{% trans "Email address" %}</label>
                            </div>
                            <div class="form-floating">
                                <input type="password" class="form-control" id="password" name="password" placeholder="{% trans 'Enter password' %}" required>
                                <label for="password">{% trans "Password" %}</label>
                                <small class="form-text text-muted">
                                    <ul>
                                        <li id="number" >{% trans "Your password must contain at least one number." %}</li>
                                        <li id="letter">{% trans "Your password must contain at least one letter." %}</li>
                                        <li id="capital">{% trans "Your password must contain at least one upper case letter." %}</li>
                                        <li id="special">{% trans "Your password must contain at least one special character." %}(!|@·#$~€%&¬/()=?¿¡{},.;:_*+)</li>
                                        <li id="length">{% trans "Your password must contain at least 8 characters." %}</li>
                                    </ul>
                                </small>
                            </div>
                            <div class="progress" role="progressbar" aria-label="Password strength bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 10px" >
                                <div class="progress-bar text-dark" id="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="form-floating">
                                <input type="password" class="form-control" id="confirmPassword" placeholder="{% trans "Repeat password" %}" required>
                                <label for="confirmPassword">{% trans "Confirm Password" %}</label>
                            </div>
                            <div id="passwordError" class="text-danger" style="display: none;">{% trans "Passwords do not match" %}</div>
                            <div>
                                <button type="submit" id="submit" disabled class="btn btn-primary btn-block">{% trans "Register" %}</button>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer text-center">
                        <small>&copy; 2024 LaAlquimistaDeLasFlores</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block footer_javascript %}
<script>
        var progressbar= document.getElementById("progressbar");
        var password = document.getElementById('password');
        var confirmPassword = document.getElementById('confirmPassword');
        var submit = document.getElementById('submit');
        var NIF = document.getElementById('NIF');
        var NIE = document.getElementById('NIE');
        NIF.addEventListener("click", ()=>{ swapRadioButtons("NIF")},false);
        NIE.addEventListener("click", ()=>{ swapRadioButtons("NIE")},false);
        password.addEventListener("keyup",()=>{setProgressBarPercents(5,getStrength(password.value),progressbar)
        swapPasswordElements(password.value)},false);
        confirmPassword.addEventListener("keyup",()=>{verifyPassword(password,confirmPassword,submit)
            error = document.getElementById('passwordError');
            if(password.classList.contains("is-invalid"))
                error.style.display = 'block';
            else
                error.style.display = 'none';
            },false);
    </script>
{% endblock %}