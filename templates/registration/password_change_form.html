{% extends 'home.html' %}
{% load i18n static%}
{% block title %}{% trans "Pasword change" %}{% endblock %}
{% block javascript %}
<script src="{% static 'js/password.js' %}"></script>
<script src="{% static 'js/progressbar.js' %}"></script>
{% endblock %}
{% block content %}
    <div class="container">
        <h2 class="my-4">{% trans 'Change Password'  %}</h2>
        <form method="POST">
            {% csrf_token %}
            <div class="form-floating">
                <input type="password" name="old_password" id="id_old_password" class="form-control" placeholder="{% trans "Old password" %}" required>
                <label for="id_old_password">{% trans 'Old password:' %}</label>
            </div>
            <div class="form-floating">
                <input type="password" name="new_password1" id="id_new_password1" class="form-control" placeholder="{% trans "New password" %}" required>
                <label for="id_new_password1">{% trans 'New password:' %}</label>
                <small class="form-text text-muted">
                    <ul>
                        <li id="number" >{% trans "Your password must contain at least one number." %}</li>
                        <li id="letter">{% trans "Your password must contain at least one letter." %}</li>
                        <li id="capital">{% trans "Your password must contain at least one upper case letter." %}</li>
                        <li id="special">{% trans "Your password must contain at least one special character." %}(!|@·#$~€%&¬/()=?¿¡{},.;:_*+)</li>
                        <li id="length">{% trans "Your password must contain at least 8 characters." %}</li>
                    </ul>
                </small>
            </div>
            <div class="progress" role="progressbar" aria-label="Password strength bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 10px" >
                <div class="progress-bar text-dark" id="progressbar" style="width: 0%"></div>
            </div>
            <div class="form-floating">
                <input type="password" name="new_password2" id="id_new_password2" class="form-control" placeholder="{% trans "Repeat password" %}" required>
                <label for="id_new_password2">{% trans 'New password (confirmation):' %}</label>
            </div>
            <div>
                <button type="submit" disabled id="submit" class="btn btn-primary">{% trans 'Change' %}</button>
            </div>
        </form>
    </div>
{% endblock %}
{% block footer_javascript %}
<script>
    var progressbar= document.getElementById("progressbar");
    var password = document.getElementById('id_new_password1');
    var confirmPassword = document.getElementById('id_new_password2');
    var submit = document.getElementById('submit');
    password.addEventListener("keyup",()=>{setProgressBarPercents(5,getStrength(password.value),progressbar)
    swapPasswordElements(password.value)},false);
    confirmPassword.addEventListener("keyup",()=>{verifyPassword(password,confirmPassword,submit)},false);
</script>
{% endblock %}